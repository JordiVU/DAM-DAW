package modules;

import java.io.File;
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.ObjectInputStream;
import java.io.ObjectOutputStream;
import java.util.Date;

public class GestionBinario {
	
	 private Date fechaAlta;
	 private String titulo;
	 private String artista;
	 private String album;
	 private String anio;
	 private String comentario;
	 private int genero;
	 private File f;
	 
	 public GestionBinario(Date fechaAlta, String titulo, String artista, String album, String anio,
			 String comentario, int genero) {
		 this.fechaAlta = fechaAlta;
		 this.titulo = titulo;
		 this.album = album;
		 this.anio = anio;
		 this.comentario = comentario;
		 this.genero = genero;
	 }
	 
	 public GestionBinario(String rutaF) {
		 this.f = new File(rutaF)
	 }
	
	public void guardarBinario() {
	 try (FileOutputStream fos = new FileOutputStream("cancion.bin");
			 ObjectOutputStream oos = new ObjectOutputStream(fos)) {
		 
		 	// Creamos la cancion de forma serializada en un archivo cancion.bin
    	 	Cancion cancion = new Cancion(fechaAlta, titulo, artista, album, anio, comentario, genero);
			oos.writeObject(cancion);
			
	 	} catch (IOException e) {
			e.printStackTrace();
	 	}
	}
	
    public void lecturaBinario(String rutaF)
    {
   	 // Convertimos en tipo File para trabajar con el
   	f = new File(rutaF);
   	 
   	//Comprobamos que el archivo exista y que acabe en .bin
   	 if(f.isFile() && rutaF.endsWith(".bin"))
   	 {
	    	 try (FileInputStream fis = new FileInputStream(rutaF);
	    			 ObjectInputStream ois = new ObjectInputStream(fis)) {
	    		 
	    			 Cancion cLeida = (Cancion) ois.readObject();
	    			 // Mostramos la clase seralizada con el toString
	    			 System.out.println(cLeida);
	    			 } 
	    	 catch (IOException | ClassNotFoundException e) {
	    			  e.printStackTrace();
			 }
   	 }
   	 else {
   		 System.out.println("Fichero no existente o no valido.");
   	 }
    }
}
